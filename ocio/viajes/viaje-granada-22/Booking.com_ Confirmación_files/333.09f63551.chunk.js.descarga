"use strict";(self["b-post-booking-web-mfe"]=self["b-post-booking-web-mfe"]||[]).push([[333],{59006:function(e,t,r){r.d(t,{V:function(){return a}});var n=r(51878),i=r(82497),o=r(14222),a=function(){function e(e,t){this.isMounted=!1,this.previousOptions={},this.context={},this.options={},this.options=e||{},this.context=t||{}}return e.prototype.getOptions=function(){return this.options},e.prototype.setOptions=function(e,t){void 0===t&&(t=!1),t&&!(0,i.D)(this.options,e)&&(this.previousOptions=this.options),this.options=e},e.prototype.unmount=function(){this.isMounted=!1},e.prototype.refreshClient=function(){var e=this.options&&this.options.client||this.context&&this.context.client;__DEV__?(0,n.kG)(!!e,'Could not find "client" in the context or passed in as an option. Wrap the root component in an <ApolloProvider>, or pass an ApolloClient instance in via options.'):(0,n.kG)(!!e,29);var t=!1;return e!==this.client&&(t=!0,this.client=e,this.cleanup()),{client:this.client,isNew:t}},e.prototype.verifyDocumentType=function(e,t){var r=(0,o.E2)(e),i=(0,o.mw)(t),a=(0,o.mw)(r.type);__DEV__?(0,n.kG)(r.type===t,"Running a "+i+" requires a graphql "+i+", but a "+a+" was used instead."):(0,n.kG)(r.type===t,30)},e}()},13260:function(e,t,r){r.d(t,{a:function(){return i}});var n=r(51099);function i(e,t){return(0,n.r)(e,t,!1)}},51099:function(e,t,r){r.d(t,{r:function(){return p}});var n=r(31191),i=(r(51878),r(32735)),o=r(82497),a=r(24605),s=r(6637),u=r(14222),c=function(e){function t(t){var r=t.options,n=t.context,i=t.onNewData,o=e.call(this,r,n)||this;return o.runLazy=!1,o.previous=Object.create(null),o.runLazyQuery=function(e){o.cleanup(),o.runLazy=!0,o.lazyOptions=e,o.onNewData()},o.obsRefetch=function(e){var t;return null===(t=o.currentObservable)||void 0===t?void 0:t.refetch(e)},o.obsFetchMore=function(e){var t;return null===(t=o.currentObservable)||void 0===t?void 0:t.fetchMore(e)},o.obsUpdateQuery=function(e){var t;return null===(t=o.currentObservable)||void 0===t?void 0:t.updateQuery(e)},o.obsStartPolling=function(e){var t;null===(t=o.currentObservable)||void 0===t||t.startPolling(e)},o.obsStopPolling=function(){var e;null===(e=o.currentObservable)||void 0===e||e.stopPolling()},o.obsSubscribeToMore=function(e){var t;return null===(t=o.currentObservable)||void 0===t?void 0:t.subscribeToMore(e)},o.onNewData=i,o}return(0,n.ZT)(t,e),t.prototype.execute=function(){this.refreshClient();var e=this.getOptions(),t=e.skip,r=e.query;return(t||r!==this.previous.query)&&(this.removeQuerySubscription(),this.removeObservable(!t),this.previous.query=r),this.updateObservableQuery(),this.getExecuteSsrResult()||this.getExecuteResult()},t.prototype.executeLazy=function(){return this.runLazy?[this.runLazyQuery,this.execute()]:[this.runLazyQuery,{loading:!1,networkStatus:s.I.ready,called:!1,data:void 0}]},t.prototype.fetchData=function(){var e=this,t=this.getOptions();return!t.skip&&!1!==t.ssr&&new Promise((function(t){return e.startQuerySubscription(t)}))},t.prototype.afterExecute=function(e){var t=(void 0===e?{}:e).lazy,r=void 0!==t&&t;this.isMounted=!0;var n=this.getOptions();return this.currentObservable&&!this.ssrInitiated()&&this.startQuerySubscription(),r&&!this.runLazy||this.handleErrorOrCompleted(),this.previousOptions=n,this.unmount.bind(this)},t.prototype.cleanup=function(){this.removeQuerySubscription(),this.removeObservable(!0),delete this.previous.result},t.prototype.getOptions=function(){var t=e.prototype.getOptions.call(this);return this.lazyOptions&&(t.variables=(0,n.pi)((0,n.pi)({},t.variables),this.lazyOptions.variables),t.context=(0,n.pi)((0,n.pi)({},t.context),this.lazyOptions.context)),this.runLazy&&delete t.skip,t},t.prototype.ssrInitiated=function(){return this.context&&this.context.renderPromises},t.prototype.getExecuteSsrResult=function(){var e=this.getOptions(),t=e.ssr,r=e.skip,i=!1===t,o=this.refreshClient().client.disableNetworkFetches,a=(0,n.pi)({loading:!0,networkStatus:s.I.loading,called:!0,data:void 0,stale:!1,client:this.client},this.observableQueryFields());if(i&&(this.ssrInitiated()||o))return this.previous.result=a,a;if(this.ssrInitiated()){var u=this.getExecuteResult()||a;return u.loading&&!r&&this.context.renderPromises.addQueryPromise(this,(function(){return null})),u}},t.prototype.prepareObservableQueryOptions=function(){var e=this.getOptions();this.verifyDocumentType(e.query,u.n_.Query);var t=e.displayName||"Query";return!this.ssrInitiated()||"network-only"!==e.fetchPolicy&&"cache-and-network"!==e.fetchPolicy||(e.fetchPolicy="cache-first"),(0,n.pi)((0,n.pi)({},e),{displayName:t,context:e.context})},t.prototype.initializeObservableQuery=function(){if(this.ssrInitiated()&&(this.currentObservable=this.context.renderPromises.getSSRObservable(this.getOptions())),!this.currentObservable){var e=this.prepareObservableQueryOptions();this.previous.observableQueryOptions=(0,n.pi)((0,n.pi)({},e),{children:void 0}),this.currentObservable=this.refreshClient().client.watchQuery((0,n.pi)({},e)),this.ssrInitiated()&&this.context.renderPromises.registerSSRObservable(this.currentObservable,e)}},t.prototype.updateObservableQuery=function(){if(this.currentObservable){var e=(0,n.pi)((0,n.pi)({},this.prepareObservableQueryOptions()),{children:void 0});this.getOptions().skip?this.previous.observableQueryOptions=e:(0,o.D)(e,this.previous.observableQueryOptions)||(this.previous.observableQueryOptions=e,this.currentObservable.setOptions(e).catch((function(){})))}else this.initializeObservableQuery()},t.prototype.startQuerySubscription=function(e){var t=this;void 0===e&&(e=this.onNewData),this.currentSubscription||this.getOptions().skip||(this.currentSubscription=this.currentObservable.subscribe({next:function(r){var n=r.loading,i=r.networkStatus,a=r.data,s=t.previous.result;s&&s.loading===n&&s.networkStatus===i&&(0,o.D)(s.data,a)||e()},error:function(r){if(t.resubscribeToQuery(),!r.hasOwnProperty("graphQLErrors"))throw r;var n=t.previous.result;(n&&n.loading||!(0,o.D)(r,t.previous.error))&&(t.previous.error=r,e())}}))},t.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var e=this.currentObservable;if(e){var t=e.last;try{e.resetLastResults(),this.startQuerySubscription()}finally{e.last=t}}},t.prototype.getExecuteResult=function(){var e=this.observableQueryFields(),t=this.getOptions();if(t.skip)e=(0,n.pi)((0,n.pi)({},e),{data:void 0,error:void 0,loading:!1,networkStatus:s.I.ready,called:!0});else if(this.currentObservable){var r=this.currentObservable.getCurrentResult(),i=r.data,o=r.loading,u=r.partial,c=r.networkStatus,l=r.errors,p=r.error;if(l&&l.length>0&&(p=new a.c({graphQLErrors:l})),e=(0,n.pi)((0,n.pi)({},e),{data:i,loading:o,networkStatus:c,error:p,called:!0}),o);else if(p)Object.assign(e,{data:(this.currentObservable.getLastResult()||{}).data});else{var d=this.currentObservable.options.fetchPolicy;if(t.partialRefetch&&u&&(!i||0===Object.keys(i).length)&&"cache-only"!==d)return Object.assign(e,{loading:!0,networkStatus:s.I.loading}),e.refetch(),e}}e.client=this.client,this.setOptions(t,!0);var h=this.previous.result;return this.previous.loading=h&&h.loading||!1,e.previousData=h&&(h.data||h.previousData),this.previous.result=e,this.currentObservable&&this.currentObservable.resetQueryStoreErrors(),e},t.prototype.handleErrorOrCompleted=function(){if(this.currentObservable&&this.previous.result){var e=this.previous.result,t=e.data,r=e.loading,n=e.error;if(!r){var i=this.getOptions(),a=i.query,s=i.variables,u=i.onCompleted,c=i.onError,l=i.skip;if(this.previousOptions&&!this.previous.loading&&(0,o.D)(this.previousOptions.query,a)&&(0,o.D)(this.previousOptions.variables,s))return;!u||n||l?c&&n&&c(n):u(t)}}},t.prototype.removeQuerySubscription=function(){this.currentSubscription&&(this.currentSubscription.unsubscribe(),delete this.currentSubscription)},t.prototype.removeObservable=function(e){this.currentObservable&&(this.currentObservable.tearDownQuery(),e&&delete this.currentObservable)},t.prototype.observableQueryFields=function(){var e;return{variables:null===(e=this.currentObservable)||void 0===e?void 0:e.variables,refetch:this.obsRefetch,fetchMore:this.obsFetchMore,updateQuery:this.obsUpdateQuery,startPolling:this.obsStartPolling,stopPolling:this.obsStopPolling,subscribeToMore:this.obsSubscribeToMore}},t}(r(59006).V);var l=r(55261);function p(e,t,r){void 0===r&&(r=!1);var a=(0,i.useContext)((0,l.K)()),s=(0,i.useReducer)((function(e){return e+1}),0),u=s[0],p=s[1],d=t?(0,n.pi)((0,n.pi)({},t),{query:e}):{query:e},h=(0,i.useRef)(),v=h.current||(h.current=new c({options:d,context:a,onNewData:function(){v.ssrInitiated()?p():Promise.resolve().then((function(){return h.current&&h.current.isMounted&&p()}))}}));v.setOptions(d),v.context=a;var f=function(e,t){var r=(0,i.useRef)();return r.current&&(0,o.D)(t,r.current.key)||(r.current={key:t,value:e()}),r.current.value}((function(){return r?v.executeLazy():v.execute()}),{options:(0,n.pi)((0,n.pi)({},d),{onError:void 0,onCompleted:void 0}),context:a,tick:u}),b=r?f[1]:f;return __DEV__&&function(e){if(__DEV__){var t=(0,i.useRef)(!1);(0,i.useEffect)((function(){return function(){t.current=!0}}),[]),(0,i.useEffect)((function(){!0===t.current&&(t.current=!1,e())}),[])}}(p),(0,i.useEffect)((function(){return function(){v.cleanup(),h.current=void 0}}),[]),(0,i.useEffect)((function(){return v.afterExecute({lazy:r})}),[b.loading,b.networkStatus,b.error,b.data,v.currentObservable]),f}},14222:function(e,t,r){r.d(t,{E2:function(){return s},mw:function(){return a},n_:function(){return n}});var n,i=r(51878);!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(n||(n={}));var o=new Map;function a(e){var t;switch(e){case n.Query:t="Query";break;case n.Mutation:t="Mutation";break;case n.Subscription:t="Subscription"}return t}function s(e){var t,r,a=o.get(e);if(a)return a;__DEV__?(0,i.kG)(!!e&&!!e.kind,"Argument of "+e+" passed to parser was not a valid GraphQL DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document"):(0,i.kG)(!!e&&!!e.kind,34);var s=e.definitions.filter((function(e){return"FragmentDefinition"===e.kind})),u=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"query"===e.operation})),c=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})),l=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation}));__DEV__?(0,i.kG)(!s.length||u.length||c.length||l.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"):(0,i.kG)(!s.length||u.length||c.length||l.length,35),__DEV__?(0,i.kG)(u.length+c.length+l.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+e+" had "+u.length+" queries, "+l.length+" subscriptions and "+c.length+" mutations. You can use 'compose' to join multiple operation types to a component"):(0,i.kG)(u.length+c.length+l.length<=1,36),r=u.length?n.Query:n.Mutation,u.length||c.length||(r=n.Subscription);var p=u.length?u:c.length?c:l;__DEV__?(0,i.kG)(1===p.length,"react-apollo only supports one definition per HOC. "+e+" had "+p.length+" definitions. You can use 'compose' to join multiple operation types to a component"):(0,i.kG)(1===p.length,37);var d=p[0];t=d.variableDefinitions||[];var h={name:d.name&&"Name"===d.name.kind?d.name.value:"data",type:r,variables:t};return o.set(e,h),h}},59427:function(e,t,r){r.r(t),r.d(t,{default:function(){return P}});var n,i=r(32735),o=r.n(i),a=r(79399),s=r(24327),u=r(13736),c=r(17940),l=r.n(c),p=r(7022),d=r.n(p),h=r(85499),v=r.n(h),f=r(95826),b=r.n(f),y=r(6776),m=r(39476),g=r(48976),k=r(44393),O="d5ba0afb58",_="e2e06f3330",S="cc89d47408",w=function(e){var t=e.helpCenterURL,r=(0,a.T)().toJSON().actionName;return o().createElement(o().Fragment,null,o().createElement(l(),{gap:"medium"},o().createElement(d(),{variant:"headline_3"},o().createElement(m.cC,{tag:"pb_help_centre_ep_header_need_help"})),o().createElement("div",{className:O},o().createElement("div",{className:_},o().createElement(v(),{svg:y.zqj,size:"large"})),o().createElement("div",{className:S},o().createElement(l(),null,o().createElement(d(),{variant:"body_1"},o().createElement(m.cC,{tag:"pb_help_centre_ep_body_1"})),o().createElement(d(),{variant:"body_1"},o().createElement(b(),{href:t,preventDefault:!1,onClick:function(){"myreservations"!==r&&"confirmation"!==r||(0,g.ti)((0,k.Z)(n||(n=(0,u.Z)(["AEAFSXZXDOVfWLdTUDXKe"]))),4)}},o().createElement(m.cC,{tag:"pb_help_centre_ep_cta_contact_cs"}))))))))},E=r(13260),x=r(42015),Q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"HelpCenterEntrypoint"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PropertyInfoInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postBooking"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"propertyInfo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"propertyInput"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PropertyInfoResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reservationId"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PropertyInfoNotFound"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errorCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:304,source:{body:"\n  query HelpCenterEntrypoint($propertyInput: PropertyInfoInput!) {\n    postBooking {\n      propertyInfo(input: $propertyInput) {\n        ... on PropertyInfoResult {\n          reservationId\n        }\n        ... on PropertyInfoNotFound {\n          errorCode\n          message\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};function P(){var e=function(){var e,t=(0,a.T)().getBasePageUrl(),r=t.searchParams.get("auth_key")||"",n={authkey:r,bookingNumber:"",pinCode:""},i=!!r,o=(0,E.a)(Q,{variables:{propertyInput:n},skip:!i}),s=o.loading,u=o.error,c=o.data;if(!i)return{loading:!1,data:void 0};if(s||u)return{loading:s,data:void 0};var l=null===c||void 0===c||null===(e=c.postBooking)||void 0===e?void 0:e.propertyInfo;if(!l&&null!==c&&void 0!==c&&c.postBooking){var p=null===c||void 0===c?void 0:c.postBooking.propertyInfo,d=p.errorCode,h=p.message;return(0,x.bf)("[help/PropertyContactOptions]: no data retrieved",{requestUrl:t.toString(),errorCode:d,message:h}),{loading:!1,data:void 0}}return{loading:s,data:l}}(),t=e.loading,r=e.data;return t?o().createElement(o().Fragment,null,null):o().createElement(w,{helpCenterURL:D(r)})}var D=function(e){var t=(0,a.T)(),r=t.toJSON(),n=r.actionName,i=r.siteType,o=void 0===i?"www":i,u=t.getBasePageUrl().searchParams,c=u.get("auth_key")||"",l=u.get("bn")||"",p=u.get("pincode")||"",d="web_pb_generic_ep";"myreservations"===n?d="d_mb_generic_ep":"mybooking"===n?d="m_mb_generic_ep":"confirmation"===n&&("mdot"===o.toLowerCase()?d="m_conf_generic_ep":"www"===o.toLowerCase()?d="d_conf_generic_ep":"tdot"===o.toLowerCase()&&(d="t_conf_generic_ep"));var h="help/",v={source:d};return c&&null!==e&&void 0!==e&&e.reservationId?(h="help/reservation/",v.res_auth_key=c,v.reservation_id=e.reservationId):l&&p&&(h="help/reservation/",v.pincode=p,v.reservation_id=l),(0,s.K)({pathname:h,searchParams:new URLSearchParams(v)}).toString()}},44393:function(e,t,r){r.d(t,{Z:function(){return i}});var n=function(e){this.tag=e};function i(e){var t;return t=Array.isArray(e)?e[0]:"object"===typeof e&&Array.isArray(e.raw)?e.raw[0]:e,new n(t)}},48976:function(e,t,r){r.d(t,{pj:function(){return l},zm:function(){return u},ti:function(){return c},r9:function(){return p},uf:function(){return d}});var n,i=r(55562),o=r(93172),a=r(89070),s=new(function(){function e(){}var t=e.prototype;return t.trackExperiment=function(e){return(0,a.J)(e.tag),window.__caplaChunkMetadataStore.getExperimentVariant(e.tag)},t.trackExperimentStage=function(e,t){return(0,a.J)(e.tag+"|"+t),o.Z.stage(e.tag,t)},t.trackCustomGoal=function(e,t){return o.Z.customGoal(e.tag,t)},t.trackGoal=function(e){return o.Z.goal(e)},t.trackGoalWithValue=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s;return(s=o.Z).goalWithValue.apply(s,[e,t].concat(i.Z(n)))},t.reportContextstatus=function(){},e}());function u(e){return h("trackExperiment")(e)}function c(e,t){return h("trackExperimentStage")(e,t)}function l(e,t){return h("trackCustomGoal")(e,t)}function p(e){return h("trackGoal")(e)}function d(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return h("trackGoalWithValue").apply(this,[e,t].concat(i.Z(n)))}function h(e){return s[e]}!function(e){e.trackExperiment="trackExperiment",e.trackExperimentStage="trackExperimentStage",e.trackGoal="trackGoal",e.trackGoalWithValue="trackGoalWithValue",e.trackCustomGoal="trackCustomGoal"}(n||(n={}))},24327:function(e,t,r){r.d(t,{K:function(){return y}});var n,i,o=r(79399),a=((n={DEFAULT:["label","sid","utm_source","utm_medium","utm_term","utm_content","utm_campaign","gclid"]})[r(98178).N.EXTRANET]=["hotel_id","lang","ses"],n);!function(e){e.app="app",e.book="book"}(i||(i={}));var s={app:"www",book:"secure"},u={app:"w",book:"b"},c={app:"app",book:"book"},l={app:"app",book:"book"},p="booking.com",d=new RegExp("^(.*?)\\.?(booking.com|booking.cn)$"),h=/^(?:w|b)(\d+)$/,v=/^(\w+)\-(app|book|devapp|devbook).*?\.dev$/,f=/^(?:app|book)\.dqs$/;function b(e,t){var r=new Set;null==t||t.forEach((function(t,n){r.has(n)?e.append(n,t):(e.set(n,t),r.add(n))}))}function y(e){return function(){var e=(0,o.T)(),t=e.getBasePageUrl();if(!t)throw new Error("Cannot construct URLs without base page URL, most likely it is an integration error. Please report this issue to #capla channel in Slack.");var r=function(e,t,r,n){var i=new URLSearchParams,o=t&&a.hasOwnProperty(t)?t:"DEFAULT";return a[o].forEach((function(t){var r=e.searchParams.get(t);r&&i.set(t,r)})),"number"===typeof(null==r?void 0:r.id)&&i.set("aid",r.id.toString()),n&&e.searchParams.forEach((function(e,t){var r;(0===(r=t).indexOf("exp_")||0===r.indexOf("b_feature_running_")||"exp_all"===r||"hotel_account_id"===r)&&i.set(t,e)})),i}(t,e.getSiteType(),e.getAffiliate(),e.isInternalIp());return function(n){var i=new URL(""+t.origin+t.pathname),o=n.host?function(e,t){var r=e.host.match(d);if(!r)return e;var n=r[1],i=r[2];return""===n||n===s.app||n===s.book?e.host=s[t]+"."+i:v.test(n)?e.host=n.replace(v,"$1-"+c[t]+".dev."+p):f.test(n)?e.host=l[t]+".dqs."+p:h.test(n)&&(e.host=n.replace(h,u[t]+"$1."+p)),e}(i,n.host):i;return n.pathname&&(o.pathname=n.pathname),o.hash=n.hash||"",e.isRobotRequest()||(b(o.searchParams,r),b(o.searchParams,n.searchParams)),o}}()(e)}},13736:function(e,t,r){function n(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}r.d(t,{Z:function(){return n}})}}]);
//# sourceMappingURL=https://s3-main-01.booking.com/internal-static/capla/static/js/333.09f63551.chunk.js.map